@model IEnumerable<FireIncidents.Models.Alert>
@{
    ViewData["Title"] = "Emergency Alerts";
}

<style>
    .alerts-container { max-width: 1000px; margin: 20px auto; }
    .alert-card { border-left: 6px solid #6c757d; background: #fff; padding: 16px; margin-bottom: 12px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
    .alert-card.evacuate { border-color: #dc3545; background: #fff5f5; }
    .alert-card.warning { border-color: #ffc107; background: #fffaf0; }
    .alert-card.info { border-color: #0d6efd; background: #f0f7ff; }
    .alert-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
    .alert-type { font-weight:600; text-transform:capitalize; }
    .alert-time { color:#6c757d; font-size:0.9rem; }
    .alert-text { white-space:pre-wrap; font-size:1.05rem; }
    .alert-actions a { font-size:0.9rem; }
</style>

<div class="container alerts-container">
    <h2>Emergency Alerts</h2>

    @if (Model == null || !Model.Any())
    {
        <div class="alert alert-info">No alerts yet.</div>
    }
    else
    {
        foreach (var a in Model)
        {
            var type = (a.AlertType ?? "info").ToLowerInvariant();
            var cardClass = type.Contains("evacu") || type == "evacuation" ? "evacuate" : (type.Contains("warn") ? "warning" : (type.Contains("info") ? "info" : ""));
            <div class="alert-card @cardClass">
                <div class="alert-header">
                    <div class="alert-type">@a.AlertType</div>
                    <div class="alert-time" title="@a.Timestamp.ToUniversalTime().ToString("u")">
                        @a.Timestamp.ToLocalTime().ToString("g")
                    </div>
                </div>
                <div class="alert-text">@a.Text</div>
                <div class="alert-actions mt-2">
                    @if (!string.IsNullOrWhiteSpace(a.Url))
                    {
                        <a class="btn btn-sm btn-outline-primary" target="_blank" rel="noopener" href="@a.Url">View original tweet</a>
                    }
                </div>
            </div>
        }
    }
</div>